/* --- styles/style-safe-mode.css --- */

/* 1. RESET GLOBAL DEL SCROLL Y ESTRUCTURA
   Liberamos el body para que tenga scroll nativo y altura autom치tica */
body[data-layout="mobile"][data-safe-mode="true"] {
    --header-title-size: var(--sm-mobile-header-title-size);
    --header-logo-size: var(--sm-mobile-header-logo-size);
    --header-icon-size: var(--sm-mobile-header-icon-size);
    --header-obras-size: var(--sm-mobile-header-obras-size);

    --footer-font-size: var(--sm-footer-font-size);
    --footer-social-link-size: var(--sm-footer-social-link-size);

    --card-title-font-size: var(--sm-card-title-font-size);
    --card-desc-font-size: var(--sm-card-desc-font-size);
    --card-breadcrump-vertical-h3-font-size: var(--sm-card-breadcrump-vertical-h3-font-size);
    --card-nivel-actual-h3-font-size: var(--sm-card-nivel-actual-h3-font-size);
    --card-volver-fija-h3-font-size: var(--sm-card-volver-fija-h3-font-size);

    --card-padding: var(--sm-mobile-card-padding);
    --card-gap: var(--sm-mobile-card-gap);

    --detail-vertical-spacing: var(--sm-detail-vertical-spacing);
    --details-title-slide-font-size: var(--sm-details-title-slide-font-size);
    --details-text-fragment-font-size: var(--sm-details-text-fragment-font-size);
    --details-action-btn-font-size: var(--sm-details-action-btn-font-size); 
    --details-action-btn-size: var(--sm-details-action-btn-size); /* Altura m치xima f칤sica */
    --details-action-icon-size: var(--sm-details-action-icon-size);
    --details-action-text-font-size: var(--sm-details-action-text-font-size);
    --details-volver-btn-font-size: var(--sm-details-volver-btn-font-size);

    --a11y-title-font-size: var(--sm-a11y-title-font-size);
    --a11y-section-font-size: var(--sm-a11y-section-font-size);
    --a11y-close-btn-font-size: var(--sm-a11y-close-btn-font-size);
    --a11y-close-btn-size: var(--sm-a11y-close-btn-size);
    --a11y-option-btn-font-size: var(--sm-a11y-option-btn-font-size);
    --a11y-slider-icon-size: var(--sm-a11y-slider-icon-size);
    --a11y-range-value-font-size: var(--sm-a11y-range-value-font-size);
    --a11y-range-size: var(--sm-a11y-range-size);
    --a11y-reset-size: var(--sm-a11y-reset-size);

    --a11y-gap: var(--sm-a11y-gap);
    --a11y-padding: var(--sm-a11y-padding);
    --a11y-header-margin: var(--sm-a11y-header-margin);
    --a11y-section-margin: var(--sm-a11y-section-margin);
    --a11y-controls-gap: var(--sm-a11y-controls-gap);
    --a11y-btn-padding: var(--sm-a11y-btn-padding);
    --a11y-btn-min-width: var(--sm-a11y-btn-min-width);
    --a11y-slider-thumb-size: var(--sm-a11y-slider-thumb-size);
    --a11y-slider-height: var(--sm-a11y-slider-height);
}

body[data-layout="mobile"][data-safe-mode="true"] * {
    /* Preferencia guardada: Sin negritas */
    font-weight: normal !important;
}

body[data-layout="mobile"][data-safe-mode="true"] .swiper-slide {
    height: auto !important;
}

body[data-layout="mobile"][data-safe-mode="true"] .card {
    min-height: auto !important;
}

body[data-layout="mobile"][data-safe-mode="true"] .footer-social-link {
    display: none !important;
}

/* 1. Asegurar que el overlay no meta ruido */
body[data-layout="mobile"][data-safe-mode="true"] .a11y-modal-overlay {
    padding: 0 !important;
    align-items: flex-start !important;
    justify-content: center !important;
}

body[data-layout="mobile"][data-safe-mode="true"] .a11y-modal {
    max-width: none !important; 
    
    margin: 10px auto 40px auto !important;
    border-radius: 4px !important;
}

/* HEADER DEL MODAL */
body[data-layout="mobile"][data-safe-mode="true"] .a11y-header h2 {
    /* 游뚿 CR칈TICO: Permitir que el t칤tulo baje de l칤nea si no cabe */
    white-space: normal !important; 
    overflow: visible !important;
    text-overflow: clip !important; /* Quitamos los "..." */
    line-height: 1.1 !important;
    
    /* Permitir que el texto ocupe todo el ancho */
    flex: 1 1 auto !important;
}

/* SECCIONES Y T칈TULOS */
body[data-layout="mobile"][data-safe-mode="true"] .a11y-section h3 {
    white-space: normal !important; /* "Tama침o Texto" en dos l칤neas si hace falta */
    overflow: visible !important;
    line-height: 1.1 !important;
    margin-bottom: 5px !important;
}

/* CONTROLES (BOTONES SANS/SERIF) */
body[data-layout="mobile"][data-safe-mode="true"] .a11y-controls-group {
    flex-wrap: wrap !important; /* Asegurar que envuelvan */
}

body[data-layout="mobile"][data-safe-mode="true"] .a11y-option-btn {
    /* Que el texto dentro del bot칩n tambi칠n pueda saltar de l칤nea */
    white-space: normal !important; 
    text-align: center !important;
    line-height: 1.1 !important;
    height: auto !important; /* Permitir que el bot칩n crezca verticalmente */
    min-width: 0 !important;
}

/* SLIDERS (RANGE WRAPPER) - LA PARTE M츼S DIF칈CIL */
body[data-layout="mobile"][data-safe-mode="true"] .a11y-range-wrapper {
    display: flex !important;
    flex-wrap: wrap !important; /* Permite crear la 2춹 fila */
    justify-content: space-between !important; /* Icono Izq - Valor Centro - Icono Der */
    align-items: center !important;
    gap: 0px !important; /* Sin gap horizontal extra, usamos space-between */
}

body[data-layout="mobile"][data-safe-mode="true"] input[type=range].a11y-range {
    /* El slider debe ocupar toda la fila si es necesario */
    flex: 1 1 100% !important; 
    min-width: 100% !important;
    margin: 5px 0 !important; /* Separaci칩n vertical */
    order: 2; /* Forzarlo debajo de los iconos peque침os si se rompe la l칤nea */
}

/* Los iconos "A" peque침os */
body[data-layout="mobile"][data-safe-mode="true"] .range-icon-small,
body[data-layout="mobile"][data-safe-mode="true"] .range-icon-large,
body[data-layout="mobile"][data-safe-mode="true"] .a11y-range-wrapper span[aria-hidden="true"],
body[data-layout="mobile"][data-safe-mode="true"] .a11y-range-value {
    order: 1 !important; /* Se mantienen en la primera fila */
    width: auto !important;
    flex: 0 1 auto !important; /* Solo ocupan lo que necesiten */
    
    /* Reset de m치rgenes */
    margin: 0 !important;
    line-height: 1.2 !important;
}

/* CENTRADO DEL VALOR (El texto "100%" o "Normal") */
body[data-layout="mobile"][data-safe-mode="true"] .a11y-range-value {
    text-align: center !important;
    flex-grow: 1 !important; /* Empuja los iconos a los extremos */
}

/* 3. FILA INFERIOR: EL SLIDER (Elemento 4 del HTML) */
body[data-layout="mobile"][data-safe-mode="true"] input[type=range].a11y-range {
    /* FORZAMOS LA NUEVA L칈NEA */
    order: 2 !important; 
    width: 100% !important; 
    flex-basis: 100% !important; 
    
    /* Espacio vital para dibujarse */
    margin-top: 8px !important; 
    margin-bottom: 5px !important;
    height: 6px !important;
    
    /* Aseguramos que no se oculte */
    display: block !important;
    opacity: 1 !important;
}

/* --- styles/style-safe-mode.css --- */