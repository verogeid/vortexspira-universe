/* --- styles/style-mobile.css --- */

@media (max-width: 600px) {
    
    /* 1. Scroll nativo y Header fijo (Aseguramos que el Header esté por encima de todo) */
    body {
        overflow-y: auto !important; 
        height: auto; min-height: 100vh; padding-bottom: 0;
    }
    
    header { 
        position: fixed; /* Asegura que el header permanece fijo y en capa superior */
    }

    /* 2. Layout fluido */
    #app-container {
        height: auto !important;
        min-height: calc(100vh - var(--header-height)); 
        /* ⭐️ CORRECCIÓN: Padding superior fijo (10px) ⭐️ */
        padding-top: 10px !important;
        display: flex; flex-direction: column;
        padding-left: 10px; padding-right: 10px; padding-bottom: 10px;
        gap: 15px; overflow: visible;
    }

    /* 3. Vista central */
    #vista-central {
        width: 100%; position: relative; 
        height: auto !important; overflow: visible !important;
        display: block; 
    }
    
    /* Ocultar vistas inactivas */
    .vista:not(.active) {
        display: none !important;
    }

    .vista {
        position: relative; height: auto !important; overflow: visible !important;
    }

    /* 4. Ocultar sidebars innecesarios */
    #card-volver-fija, #info-adicional {
        display: none !important;
    }
    
    /* 5. Vista de detalle full-screen (Asegura que el scroll empieza DEBAJO del header) */
    #vista-detalle-mobile {
        /* Revertimos a posición fija (full screen) cuando está activo */
        position: fixed !important; top: 0 !important; left: 0 !important; 
        width: 100% !important; height: 100vh !important;
        
        z-index: 1000 !important;
        
        overflow-y: auto !important; 
        /* ⭐️ CORRECCIÓN CLAVE: Empujar el contenido debajo del header ⭐️ */
        padding-top: calc(var(--header-height) + 10px);
        padding-bottom: 10px;
        
        /* Scrollbar azul en detalle */
        scrollbar-width: thin;
        scrollbar-color: var(--color-primary) transparent;
        display: flex; flex-direction: column; 
    }
    #vista-detalle-mobile::-webkit-scrollbar-thumb {
        background-color: var(--color-primary);
    }
    
    /* Aseguramos que la vista de detalle móvil inactiva está oculta y no interfiere */
    #vista-detalle-mobile:not(.active) {
        display: none !important; 
        z-index: 1;
    }


    .vista-mobile-fullscreen .contenido-curso { 
        padding: 0 5px 20px 5px; /* Padding interno */
    }
    
    /* Contenedor del botón Volver (Sticky) */
    .mobile-back-header {
        margin-bottom: 15px !important; 
        margin-top: 5px !important;
        text-align: left;
        width: 100%;
    }

    /* 6. Footer */
    footer {
        position: relative !important; bottom: auto;
        margin-top: 40px; padding: 20px 5px; background: var(--color-bg); width: 100%;
    }
    
    ::-webkit-scrollbar { width: 4px; }


/* Layout del Track Móvil (Base para ambos tracks) */
.mobile-track {
    display: flex; flex-direction: column; 
    gap: 10px; 
    width: 100%; height: auto; padding: 5px; box-sizing: border-box;
    margin-top: 0 !important; justify-content: flex-start;
    
    /*scroll-snap-type: y mandatory; */
    padding-bottom: 15vh; 
}

/* ⭐️ CORRECCIÓN DE INTERACCIÓN: Cursor y Touch Action ⭐️ */
.mobile-track .card:not(.disabled):not([data-tipo="relleno"]) {
    cursor: pointer !important;
    pointer-events: auto !important; 
    /* ⭐️ SOLUCIÓN CLAVE (si el navegador cancela el evento por scroll) ⭐️ */
    touch-action: manipulation; 
}


/* --------------------------------------------------------------------- */
/* ⭐️ VISTA SUBMENÚ (Usa #track-mobile-submenu) ⭐️ */
/* --------------------------------------------------------------------- */

/* Margen grande para limpiar los dos elementos sticky (Breadcrumb y Volver) */
#track-mobile-submenu .card {
    width: 100%; min-height: 100px; height: auto; font-size: 1.1rem;
    scroll-snap-align: start; 
    scroll-margin-top: 130px; 
}

/* --------------------------------------------------------------------- */
/* ⭐️ VISTA RAÍZ (Usa #track-mobile-root) ⭐️ */
/* --------------------------------------------------------------------- */

/* Margen mínimo para compensar solo el padding del header */
#track-mobile-root .card {
    width: 100%; min-height: 100px; height: auto; font-size: 1.1rem;
    scroll-snap-align: start; 
    scroll-margin-top: 20px; 
}

/* --------------------------------------------------------------------- */
/* ⭐️ ESTILOS STICKY (Ajuste de Posición Vertical) ⭐️ */
/* --------------------------------------------------------------------- */

/* Breadcrumb Sticky */
.mobile-track .card-breadcrumb-vertical {
    position: sticky;
    top: 10px; /* ⭐️ CORRECCIÓN: 10px fijo ⭐️ */
    z-index: 50; 
    background-color: var(--color-bg); 
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    border-style: solid !important;
    margin-bottom: 10px; 
    min-height: 50px; 
}

/* Tarjeta Volver (Nivel Inferior) */
.mobile-track .card-volver-vertical {
    position: sticky; 
    /* ⭐️ CORRECCIÓN CLAVE: Ajuste de TOP para evitar solapamiento ⭐️ */
    top: 70px; 
    z-index: 49; 
    min-height: 50px; 
    background: var(--color-card-bg);
    border-style: solid; 
    text-align: center; 
    margin-bottom: 10px; 
}
}
