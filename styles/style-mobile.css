/* --- styles/style-mobile.css --- */

/* @media (max-width: 600px) */
body[data-layout="mobile"] {
    /* 救넖잺 MAPEO DE VARIABLES: Usamos los valores mobile definidos en theme */
    --header-title-size: var(--mobile-header-title-size);
    --header-logo-size: var(--mobile-header-logo-size);
    --header-icon-size: var(--mobile-header-icon-size);
    --header-obras-size: var(--mobile-header-obras-size);

    overflow: hidden !important; 
    height: 100dvh; 
    position: fixed; 
    width: 100%;
    padding-bottom: var(--footer-height); 
}

body[data-layout="mobile"] #app-container {
    height: auto !important;
    min-height: calc(100vh - var(--header-height-real, 50px) - var(--footer-height-real, 6vh));

    margin-top: var(--header-height-real, 50px) !important;
    margin-bottom: var(--footer-height-real, 6dvh) !important;

    padding-top: 15px !important; padding-bottom: 15px !important;
    padding-left: 0px; padding-right: 0px; 

    display: flex; flex-direction: column;
    gap: var(--card-gap); overflow: visible;
}

body[data-layout="mobile"] #vista-volver, 
body[data-layout="mobile"] #card-volver-fija,
body[data-layout="mobile"] #info-adicional {
    display: none !important; 
}

body[data-layout="mobile"] #vista-central {
    width: 100%; position: relative; 
    height: auto !important; overflow: visible !important;
    display: block; 
    flex-grow: 1; 
}

body[data-layout="mobile"] .vista:not(.active) {
    display: none !important;
}

body[data-layout="mobile"] .vista {
    position: relative; height: auto !important; overflow: visible !important;
}

body[data-layout="mobile"] #vista-detalle-mobile {
    position: fixed !important; 
    top: var(--header-height) !important; 
    left: 0 !important;
    width: 100% !important; 
    height: calc(100vh - var(--header-height) - var(--footer-height)) !important;
    z-index: 99 !important;

    overflow-y: hidden !important;
    display: flex; flex-direction: column; 

    /* 救넖잺 Delegamos el espaciado al wrapper/slide para igualar la navegaci칩n 救넖잺 */
    padding: 0;
    box-sizing: border-box;
}

body[data-layout="mobile"] #vista-detalle-mobile:not(.active) {
    display: none !important; 
}

/* Aplicamos las reglas a AMBOS carruseles (Nav y Detalle) */
body[data-layout="mobile"] #nav-swiper-mobile, 
body[data-layout="mobile"] #detalle-swiper-mobile {
    height: calc(100vh - var(--header-height-real, 50px) - var(--footer-height-real, 6vh) - 10px) !important;
    width: 100%; position: relative;

    overflow: hidden; 
    touch-action: pan-y pinch-zoom !important;
}

/* ALINEACI칍N VERTICAL: Ambos wrappers tienen 15px de padding superior */
body[data-layout="mobile"] #nav-swiper-mobile .swiper-wrapper, 
body[data-layout="mobile"] #detalle-swiper-mobile .swiper-wrapper {
    display: flex !important; flex-direction: column; 
    gap: 10px; 

    width: 100%; height: auto !important; 

    padding-bottom: 15dvh; 
    padding-top: 15px !important; 
}

/* ALINEACI칍N HORIZONTAL: Ambos slides tienen 6% de padding lateral */
body[data-layout="mobile"] #nav-swiper-mobile .swiper-slide, 
body[data-layout="mobile"] #detalle-swiper-mobile .swiper-slide {
    width: 100% !important; height: auto !important; 

    display: flex; 
    flex-direction: column;
    align-items: center;
    box-sizing: border-box; 

    padding: 0 6% !important; 
}

body[data-layout="mobile"] #nav-swiper-mobile .swiper-slide .card, 
body[data-layout="mobile"] #detalle-swiper-mobile .swiper-slide .card {
    width: 100%;
    box-sizing: border-box; 
}

body[data-layout="mobile"] .card-relleno-final {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
}

/* ============================================================
   游뚿 MODO DE SEGURIDAD UNIFICADO (Reflow WCAG 1.4.10) 游뚿
   Se activa v칤a JS (data-safe-mode="true")
   ============================================================ */
/*@media (max-height: 500px) */

/* 1. Liberamos el BODY para permitir scroll nativo */
body[data-layout="mobile"][data-safe-mode="true"] {
    position: static !important;
    overflow-y: auto !important; 
    height: auto !important;
    padding-top: 0 !important; /* El padding lo dar치n los elementos ahora est치ticos */
    padding-bottom: 0 !important;
}

/* 3. El Contenedor Principal fluye entre header y footer */
body[data-layout="mobile"][data-safe-mode="true"] #app-container {
    height: auto !important;
    min-height: 0 !important;
    overflow: visible !important;
    display: block !important; /* Quitamos flex/grid complejos */
    padding: 10px !important;
}

/* 4. Soltamos el Swiper para que se muestre como lista vertical simple */
body[data-layout="mobile"][data-safe-mode="true"] #nav-swiper-mobile, 
body[data-layout="mobile"][data-safe-mode="true"] #detalle-swiper-mobile {
    height: auto !important;
    overflow: visible !important;
}

body[data-layout="mobile"][data-safe-mode="true"] .swiper-wrapper {
    height: auto !important;
    padding-bottom: 20px !important;
    padding-top: 0 !important;
}

body[data-layout="mobile"][data-safe-mode="true"] .swiper-slide {
    height: auto !important;
    margin-bottom: 20px !important; /* Separaci칩n manual entre cards */
}

/* --- styles/style-mobile.css --- */