/* --- styles/style-details.css --- */

/* 1. Scroll interno y Contenedores */
#detalle-contenido-desktop, 
#detalle-contenido-mobile {
    max-height: 100%; 
    overflow-y: auto; 

    padding: var(--detail-vertical-spacing) 15px;

    box-sizing: border-box;
    
    scrollbar-width: thin;
    scrollbar-color: var(--color-primary) transparent;
    scroll-behavior: smooth;
}

    /* @media (max-width: 600px) */ 
    body[data-layout="mobile"] #detalle-contenido-mobile {
        padding: 0; 
    }

#detalle-swiper-desktop .swiper-slide,
#detalle-swiper-mobile .swiper-slide {
    height: auto !important; 
    max-height: none !important;
    margin-bottom: 0px; 
    flex-shrink: 0; 
}

/* 2. BLOQUE DE TEXTO Y FRAGMENTOS */
#detalle-bloque-texto {
    outline: none;
    border: none;
    padding: 0; 
}

.detail-title-slide {
    /* ⭐️ A11Y FIX */
    font-size: var(--details-title-slide-font-size);
    margin-top: 0;

    margin-bottom: var(--detail-vertical-spacing);

    line-height: 1.2;
}

.detail-text-fragment {
    outline: none;
    border-radius: 4px;
    border: none;
    border-left: 2px solid transparent; 
    padding-left: 6px; 
    transition: all 0.2s ease, opacity 0.5s ease;
    will-change: opacity;
    cursor: text;
    filter: none !important;
    opacity: 0.3; 
    pointer-events: auto;

    margin-bottom: 0;
    
    /* A11Y FIX CRÍTICO: Texto base legible (1rem) + crecimiento */
    font-size: var(--details-text-fragment-font-size);
    line-height: var(--line-height-base);
    
    width: 100%;
}

.detail-text-fragment .content-wrapper {
    /* 1. ACTIVAR GUIONES AUTOMÁTICOS */
    /* Corta las palabras por la sílaba correcta según el idioma definido en <html lang> */
    -webkit-hyphens: auto;
    -moz-hyphens: auto;
    -ms-hyphens: auto;
    hyphens: auto;

    /* 2. SEGURIDAD DE DESBORDAMIENTO */
    /* Si una palabra técnica es larguísima y no tiene guiones, la corta a la fuerza */
    word-wrap: break-word;
    overflow-wrap: break-word;

    /* 3. OPTIMIZACIÓN DE LECTURA */
    /* Mejora el renderizado del texto para que sea más nítido */
    text-rendering: optimizeLegibility;
}
.detail-text-fragment p {
    width: 100%;
    margin-top: 0;
    margin-left: 0;
    margin-right: 0;
    margin-bottom: var(--paragraph-spacing) !important;
}
.detail-text-fragment p:last-child {
    margin-bottom: 0 !important;
}

.detail-text-fragment:focus-visible,
.detail-text-fragment.focus-current { 
    filter: none !important; 
    opacity: 1 !important;
    border-left: 2px solid var(--color-text) !important;
    box-shadow: -5px 0 10px -5px var(--color-shadow-disabled); 
    color: var(--color-text) !important; 
    background-color: transparent; 
}

.detail-text-fragment.focus-current-hover, 
.detail-text-fragment:hover { 
    filter: none !important; 
    opacity: 1 !important;
    border-left-color: transparent; 
    box-shadow: -5px 0 10px -5px var(--color-shadow-disabled); 
    color: var(--color-text) !important; 
}

/* 3. EFECTO BLUR CON GRADIENTE DE PROXIMIDAD */
.detail-text-fragment.focus-current {
    filter: none;
    opacity: 1;
}

.detail-action-item.focus-current {
    outline: none !important;
    border: none !important;
    box-shadow: none !important;
    filter: none !important; 
    opacity: 1 !important; 
    color: inherit; 
}
.detail-action-item:hover { 
    outline: none !important;
    border: none !important;
    box-shadow: none !important;
    filter: none !important; 
    opacity: 1 !important; 
    color: inherit; 
}

.detail-text-fragment.focus-adj-1,
.detail-action-item.focus-adj-1 {
    filter: none !important;
    opacity: 0.6;
}

.detail-text-fragment.focus-adj-2,
.detail-action-item.focus-adj-2 {
    filter: none !important;
    opacity: 0.3;
}

.detail-action-item {
    transition: opacity 0.5s ease;
    filter: none !important;
    opacity: 0.3; 
    pointer-events: auto;
    outline: none;
    box-sizing: border-box; 
    width: 100%;
}

.detail-action-item.focus-current .detail-action-btn {
    pointer-events: auto;
}

/* 4. LISTA DE ACCIONES */
.detail-actions-list {
    display: flex; flex-direction: column; gap: 0; 
    margin-top: 15px; width: 100%; max-width: 100%; 
}

.detail-action-item {
    display: flex; justify-content: space-between; align-items: center;
    padding: 8px 5px; background: transparent;
    border-bottom: 1px solid var(--color-border-placeholder);
    transition: background-color 0.2s ease;
}
.detail-action-item:hover { 
    background-color: var(--color-details-action-item-hover); 
}

.detail-action-text {
    /* A11Y FIX */
    font-size: var(--details-action-text-font-size);
    font-weight: 500; 
    color: inherit; 
    text-align: left; margin-right: 15px; flex-grow: 1;
}

/* 5. BOTÓN DE ACCIÓN */
.detail-action-btn {
    display: flex; justify-content: center; align-items: center;
    width: var(--details-action-btn-size);
    height: var(--details-action-btn-size);
    background: transparent; 
    border: 2px solid var(--color-card-border); 
    border-radius: 8px;  
    color: var(--color-text); 
    font-size: var(--details-action-btn-font-size);
    line-height: 1;
    text-decoration: none; cursor: pointer;
    transition: all 0.2s ease; flex-shrink: 0; 
    position: relative; 
    overflow: hidden; 
}

.detail-action-btn:not(.disabled):hover,
.detail-action-item:hover .detail-action-btn:not(.disabled) { 
    border-color: var(--color-primary);
    box-shadow: 0 0 15px var(--color-shadow-primary);
    transform: scale(1.1);
    color: var(--color-text); 
    outline: none;
}

.detail-action-btn:not(.disabled):focus-visible,
.detail-action-item.focus-current .detail-action-btn:not(.disabled) { 
    border-color: var(--color-primary);   
    color: var(--color-primary) !important; 
    box-shadow: 0 0 15px var(--color-shadow-primary);
    transform: scale(1.1);
    outline: none;
}

.detail-action-btn.disabled {
    color: var(--color-text-muted); 
    border: 2px solid var(--color-card-border-disabled); 
    background: transparent;
    cursor: default; 
    width: var(--details-action-btn-size);
    height: var(--details-action-btn-size);
    border-radius: 50%;
    font-size: var(--details-action-btn-font-size);
    line-height: 1;
    filter: none; 
    transform: none; 
    transition: all 0.2s ease; 
    pointer-events: auto; 
}

.detail-action-btn.disabled .triangulo-svg,
.detail-action-btn.disabled .icon-wrapper,
.detail-action-btn.disabled > i:not(.icon-vacio) { 
    display: none !important; 
}
.detail-action-btn.disabled > i.icon-vacio { 
    display: block !important;
}

.detail-action-btn.disabled:hover,
.detail-action-item:hover .detail-action-btn.disabled { 
    outline: none;
    transform: scale(1.03); 
    border-color: var(--color-card-border); 
    box-shadow: 0 0 10px var(--color-shadow-disabled);
    color: var(--color-text); 
}

.detail-action-btn.disabled:focus-visible,
.detail-action-item.focus-current .detail-action-btn.disabled { 
    outline: none;
    transform: scale(1.03); 
    border-color: var(--color-text); 
    box-shadow: 0 0 15px var(--color-shadow-disabled); 
    color: var(--color-text); 
}

.action-icon {
    display: inline-block; 
    width: var(--details-action-icon-size); height: var(--details-action-icon-size);
    background-color: currentColor; 
    -webkit-mask-repeat: no-repeat; mask-repeat: no-repeat;
    -webkit-mask-position: center; mask-position: center;
    -webkit-mask-size: contain; mask-size: contain;
}
.icon-download { -webkit-mask-image: var(--icon-download); mask-image: var(--icon-download); }
.icon-link { -webkit-mask-image: var(--icon-link); mask-image: var(--icon-link); }
.icon-buy { -webkit-mask-image: var(--icon-buy); mask-image: var(--icon-buy); }
.icon-vacio { -webkit-mask-image: var(--icon-vacio); mask-image: var(--icon-vacio); }

/* 7. Estilo Específico Botón Volver Móvil */
button.detail-action-btn {
    width: auto !important; height: auto !important;
    padding: 0.5rem 1rem !important; 
    border-radius: 20px !important; margin-bottom: 0; 
    font-weight: bold; aspect-ratio: auto; 
    /* A11Y FIX */
    font-size: var(--details-volver-btn-font-size);
    background: var(--color-card-bg); 
}

/* --- styles/style-details.css --- */